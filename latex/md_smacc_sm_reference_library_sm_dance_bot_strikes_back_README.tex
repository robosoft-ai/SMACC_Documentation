\doxysubsection*{State Machine Diagram}



\doxysubsection*{Description}

A full-\/featured state machine example, that highlights the capabilities of SMACC \& the ROS Navigation Stack via the Move\+BaseZ Client. In the original \mbox{\hyperlink{namespacesm__dance__bot}{sm\+\_\+dance\+\_\+bot}} state machine, the variables that controlled the movements of the robot were entirely static, but in this example we made them dynamic, in that the robot uses a lidar sensor to find the range of the wall in front of it, then moves forward that value minus some margin. This also shows the \char`\"{}\+Orthogonal Read-\/\+Write Cycle\char`\"{} where we are reading data from one orthogonal (in this case the lidar client, \char`\"{}cl\+\_\+lidar\char`\"{} is inside the obstacle perception orthogonal \char`\"{}or\+\_\+obstacle\+\_\+perception\char`\"{} and writes via the client \char`\"{}cl\+\_\+move\+\_\+base\+\_\+z\char`\"{} in the navigation orthogonal \char`\"{}or\+\_\+navigation\char`\"{}.~\newline


\href{https://reelrbtx.github.io/SMACC_Documentation/master/html/namespacesm__dance__bot__strikes__back.html}{\texttt{ Doxygen Namespace \& Class Reference}}

To see a video of this state machine in action click \href{https://www.youtube.com/watch?v=ucMr5Dg6UpU}{\texttt{ here}}. ~\newline




 

~\newline


\doxysubsection*{Build Instructions}

Before you build, make sure you\textquotesingle{}ve installed all the dependencies...


\begin{DoxyCode}{0}
\DoxyCodeLine{rosdep install -\/-\/from-\/paths src -\/-\/ignore-\/src -\/r -\/y}

\end{DoxyCode}


Then you build with either catkin build or catkin make...


\begin{DoxyCode}{0}
\DoxyCodeLine{catkin build}

\end{DoxyCode}
 \doxysubsection*{Operating Instructions}

After you build, remember to source the proper devel folder...


\begin{DoxyCode}{0}
\DoxyCodeLine{source \string~/catkin\_ws/devel/setup.bash}

\end{DoxyCode}


And then run the launch file for the full gazebo demo...


\begin{DoxyCode}{0}
\DoxyCodeLine{roslaunch sm\_dance\_bot\_strikes\_back sm\_dance\_bot\_strikes\_back.launch}

\end{DoxyCode}


Or, you can run the lightweight demo...


\begin{DoxyCode}{0}
\DoxyCodeLine{roslaunch sm\_dance\_bot\_strikes\_back sm\_dance\_bot\_strikes\_back.launch sm\_xterm:=nice server\_nodes\_xterms:=nice show\_gz\_client:=false show\_smacc\_viewer:=false}

\end{DoxyCode}


This launch command starts the process by hiding the xterminals for all the servers, the state machine, the smacc\+\_\+viewer and the gazebo client.

\doxysubsection*{Viewer Instructions}

If you have the SMACC Viewer installed then type...


\begin{DoxyCode}{0}
\DoxyCodeLine{rosrun smacc\_viewer smacc\_viewer\_node.py}

\end{DoxyCode}


If you don\textquotesingle{}t have the SMACC Viewer installed, click \href{http://smacc.ninja/smacc-viewer/}{\texttt{ here}} for instructions. 