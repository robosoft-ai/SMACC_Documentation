\hypertarget{smacc__runtime__test__node_8cpp_source}{}\doxysection{smacc\+\_\+runtime\+\_\+test\+\_\+node.\+cpp}
\label{smacc__runtime__test__node_8cpp_source}\index{smacc\_diagnostics/smacc\_runtime\_test/src/smacc\_runtime\_test\_node.cpp@{smacc\_diagnostics/smacc\_runtime\_test/src/smacc\_runtime\_test\_node.cpp}}
\mbox{\hyperlink{smacc__runtime__test__node_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include <ros/ros.h>}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00002}00002 \textcolor{preprocessor}{\#include <rosgraph\_msgs/Log.h>}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include <smacc\_msgs/SmaccTransitionLogEntry.h>}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include <boost/signals2.hpp>}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00005}00005 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00006}00006 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00007}00007 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00008}00008 \textcolor{keyword}{class }\mbox{\hyperlink{classSmaccTestRuntimeNode}{SmaccTestRuntimeNode}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00009}00009 \textcolor{keyword}{class }\mbox{\hyperlink{classTimeoutFailureTestPolicy}{TimeoutFailureTestPolicy}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00010}00010 \textcolor{keyword}{class }\mbox{\hyperlink{classReachedStateSuccessTestPolicy}{ReachedStateSuccessTestPolicy}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00012}00012 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00013}\mbox{\hyperlink{classTestPolicy}{00013}} \textcolor{keyword}{class }\mbox{\hyperlink{classTestPolicy}{TestPolicy}}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00014}00014 \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00015}00015 \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00016}\mbox{\hyperlink{classTestPolicy_a717c3e59e35216a175398b85575aec43}{00016}}   \mbox{\hyperlink{classSmaccTestRuntimeNode}{SmaccTestRuntimeNode}}* \mbox{\hyperlink{classTestPolicy_a717c3e59e35216a175398b85575aec43}{owner\_}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00018}\mbox{\hyperlink{classTestPolicy_a43d28339f108860503ef66ce4692596d}{00018}}   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classTestPolicy_a43d28339f108860503ef66ce4692596d}{init}}(XmlRpc::XmlRpcValue\& initXmlRpcValue)}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00019}00019   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00020}00020   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00022}\mbox{\hyperlink{classTestPolicy_ae7a8f2ef3c4d513122ad20d5cffc88db}{00022}}   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classTestPolicy_ae7a8f2ef3c4d513122ad20d5cffc88db}{update}}()}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00023}00023   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00024}00024   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00025}00025 \};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00026}00026 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00028}\mbox{\hyperlink{classSmaccTestRuntimeNode}{00028}} \textcolor{keyword}{class }\mbox{\hyperlink{classSmaccTestRuntimeNode}{SmaccTestRuntimeNode}}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00029}00029 \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00030}00030 \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00031}\mbox{\hyperlink{classSmaccTestRuntimeNode_a7521807a7f051ca753672ee459f93d4a}{00031}}   ros::NodeHandle \mbox{\hyperlink{classSmaccTestRuntimeNode_a7521807a7f051ca753672ee459f93d4a}{nh\_}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00032}\mbox{\hyperlink{classSmaccTestRuntimeNode_a88121fc45189308d50f49c950461e1f8}{00032}}   ros::Subscriber \mbox{\hyperlink{classSmaccTestRuntimeNode_a88121fc45189308d50f49c950461e1f8}{rosoutSub\_}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00033}\mbox{\hyperlink{classSmaccTestRuntimeNode_a8cd8b97668759afd45898951011487d0}{00033}}   ros::Subscriber \mbox{\hyperlink{classSmaccTestRuntimeNode_a8cd8b97668759afd45898951011487d0}{smaccTransitionSub\_}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00036}\mbox{\hyperlink{classSmaccTestRuntimeNode_a099952c0249a6f4f94469d991a644b69}{00036}}   std::vector<std::shared\_ptr<TestPolicy>> \mbox{\hyperlink{classSmaccTestRuntimeNode_a099952c0249a6f4f94469d991a644b69}{testPolicies}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00037}\mbox{\hyperlink{classSmaccTestRuntimeNode_a9b544f3ca3684171cbb56d97aadeac17}{00037}}   boost::signals2::signal<void(\textcolor{keyword}{const} rosgraph\_msgs::Log\&)> \mbox{\hyperlink{classSmaccTestRuntimeNode_a9b544f3ca3684171cbb56d97aadeac17}{onRosOutMsg}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00038}\mbox{\hyperlink{classSmaccTestRuntimeNode_aaaedcb5c8a4cca432b5138bb1dfb0a6c}{00038}}   boost::signals2::signal<void(\textcolor{keyword}{const} smacc\_msgs::SmaccTransitionLogEntry\&)> \mbox{\hyperlink{classSmaccTestRuntimeNode_aaaedcb5c8a4cca432b5138bb1dfb0a6c}{onSmaccTransition}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00039}00039 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00040}00040   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00041}\mbox{\hyperlink{classSmaccTestRuntimeNode_a5fd41c01ca61e14764632ca8602e2d6d}{00041}}   std::shared\_ptr<TestPolicy> \mbox{\hyperlink{classSmaccTestRuntimeNode_a5fd41c01ca61e14764632ca8602e2d6d}{tryTestPolicyFactory}}(std::string matchname, XmlRpc::XmlRpcValue\& initXmlRpcValue)}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00042}00042   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00043}00043     std::shared\_ptr<TestPolicy> policy = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00044}00044     ROS\_INFO\_STREAM(initXmlRpcValue);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00046}00046     \textcolor{keyword}{auto} type = (std::string)initXmlRpcValue[\textcolor{stringliteral}{"{}type"{}}];}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00048}00048     \textcolor{keywordflow}{if} (type == matchname)}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00049}00049     \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00050}00050       \textcolor{keyword}{auto} specificPolicy = std::make\_shared<T>();}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00051}00051       policy = std::dynamic\_pointer\_cast<TestPolicy>(specificPolicy);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00052}00052       \mbox{\hyperlink{classSmaccTestRuntimeNode_a099952c0249a6f4f94469d991a644b69}{testPolicies}}.push\_back(policy);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00054}00054       policy-\/>owner\_ = \textcolor{keyword}{this};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00055}00055       policy-\/>init(initXmlRpcValue);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00056}00056     \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00058}00058     \textcolor{keywordflow}{return} policy;}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00059}00059   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00060}00060 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00061}\mbox{\hyperlink{classSmaccTestRuntimeNode_a8a75b2f3884af285826c7168753b8886}{00061}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classSmaccTestRuntimeNode_a8a75b2f3884af285826c7168753b8886}{init}}()}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00062}00062   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00063}00063     ROS\_INFO(\textcolor{stringliteral}{"{}[SmaccTestruntimeNode] subscribing rosout"{}});}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00065}00065     ros::NodeHandle private\_nh(\textcolor{stringliteral}{"{}\string~"{}});}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00066}00066     std::string stateMachineROSParamWs;}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00067}00067     \textcolor{keywordflow}{if} (private\_nh.getParam(\textcolor{stringliteral}{"{}state\_machine\_rosparam\_ws"{}}, stateMachineROSParamWs))}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00068}00068     \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00069}00069       ROS\_INFO\_STREAM(\textcolor{stringliteral}{"{}state machine param ws: "{}} << stateMachineROSParamWs);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00070}00070     \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00072}00072     \mbox{\hyperlink{classSmaccTestRuntimeNode_a88121fc45189308d50f49c950461e1f8}{rosoutSub\_}} = \mbox{\hyperlink{classSmaccTestRuntimeNode_a7521807a7f051ca753672ee459f93d4a}{nh\_}}.subscribe(\textcolor{stringliteral}{"{}/rosout"{}}, 1, \&\mbox{\hyperlink{classSmaccTestRuntimeNode_a9d03a2f6a41e75c488f932b7efcb1292}{SmaccTestRuntimeNode::onRosOutCallback}}, \textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00073}00073     \mbox{\hyperlink{classSmaccTestRuntimeNode_a8cd8b97668759afd45898951011487d0}{smaccTransitionSub\_}} = \mbox{\hyperlink{classSmaccTestRuntimeNode_a7521807a7f051ca753672ee459f93d4a}{nh\_}}.subscribe(stateMachineROSParamWs + \textcolor{stringliteral}{"{}/smacc/transition\_log"{}}, 1, \&\mbox{\hyperlink{classSmaccTestRuntimeNode_a09b21826547d6ac7de6049611bb1cde8}{SmaccTestRuntimeNode::onSmaccTransitionCallback}}, \textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00075}00075     XmlRpc::XmlRpcValue successSwitchParam;}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00076}00076     private\_nh.getParam(\textcolor{stringliteral}{"{}success\_switch"{}}, successSwitchParam);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00077}00077     ROS\_INFO\_STREAM(\textcolor{stringliteral}{"{}[SmaccTestruntimeNode] success switch"{}} << successSwitchParam);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00078}00078     ROS\_ASSERT(successSwitchParam.getType() == XmlRpc::XmlRpcValue::TypeArray);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00079}00079 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00080}00080     \textcolor{keywordflow}{for} (int32\_t i = 0; i < successSwitchParam.size(); ++i)}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00081}00081     \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00082}00082       \textcolor{keyword}{auto} initXmlRpcValue = successSwitchParam[i];}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00083}00083       \textcolor{keywordflow}{if} (tryTestPolicyFactory<ReachedStateSuccessTestPolicy>(\textcolor{stringliteral}{"{}state\_reached"{}}, initXmlRpcValue) != \textcolor{keyword}{nullptr})}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00084}00084         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00085}00085     \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00086}00086 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00087}00087     XmlRpc::XmlRpcValue failureSwitchParam;}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00088}00088     private\_nh.getParam(\textcolor{stringliteral}{"{}failure\_switch"{}}, failureSwitchParam);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00089}00089     ROS\_INFO\_STREAM(\textcolor{stringliteral}{"{}[SmaccTestruntimeNode] failure switch"{}} << failureSwitchParam);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00090}00090     ROS\_ASSERT(failureSwitchParam.getType() == XmlRpc::XmlRpcValue::TypeArray);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00092}00092     \textcolor{keywordflow}{for} (int32\_t i = 0; i < failureSwitchParam.size(); ++i)}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00093}00093     \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00094}00094       \textcolor{keyword}{auto} initXmlRpcValue = failureSwitchParam[i];}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00095}00095       \textcolor{keywordflow}{if} (tryTestPolicyFactory<TimeoutFailureTestPolicy>(\textcolor{stringliteral}{"{}timeout"{}}, initXmlRpcValue) != \textcolor{keyword}{nullptr})}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00096}00096         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00097}00097     \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00098}00098   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00099}\mbox{\hyperlink{classSmaccTestRuntimeNode_a47f93f7fe74e3fc416a2655e92c8dd2d}{00099}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classSmaccTestRuntimeNode_a47f93f7fe74e3fc416a2655e92c8dd2d}{success}}(std::string msg)}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00100}00100   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00101}00101     ROS\_INFO\_STREAM(\textcolor{stringliteral}{"{}SmaccRuntimeTestNode policy thrown success exit: "{}} << msg);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00102}00102     exit(-\/1);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00103}00103   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00104}00104 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00105}\mbox{\hyperlink{classSmaccTestRuntimeNode_a58254eca6e6a5f2bde6417a1cccc932a}{00105}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classSmaccTestRuntimeNode_a58254eca6e6a5f2bde6417a1cccc932a}{failure}}(std::string msg)}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00106}00106   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00107}00107     ROS\_FATAL\_STREAM(\textcolor{stringliteral}{"{}SmaccRuntimeTestNode policy thrown failure exit: "{}} << msg);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00108}00108     exit(-\/1);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00109}00109   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00110}00110 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00111}\mbox{\hyperlink{classSmaccTestRuntimeNode_a0cdde5c108219ca3d7db941676fc1dcf}{00111}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classSmaccTestRuntimeNode_a0cdde5c108219ca3d7db941676fc1dcf}{update}}()}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00112}00112   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00113}00113     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& policy : \mbox{\hyperlink{classSmaccTestRuntimeNode_a099952c0249a6f4f94469d991a644b69}{testPolicies}})}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00114}00114     \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00115}00115       policy-\/>update();}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00116}00116     \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00117}00117   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00118}00118 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00119}\mbox{\hyperlink{classSmaccTestRuntimeNode_a9d03a2f6a41e75c488f932b7efcb1292}{00119}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classSmaccTestRuntimeNode_a9d03a2f6a41e75c488f932b7efcb1292}{onRosOutCallback}}(\textcolor{keyword}{const} rosgraph\_msgs::Log\& msg)}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00120}00120   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00121}00121       this-\/>\mbox{\hyperlink{classSmaccTestRuntimeNode_a9b544f3ca3684171cbb56d97aadeac17}{onRosOutMsg}}(msg);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00122}00122   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00123}00123 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00124}\mbox{\hyperlink{classSmaccTestRuntimeNode_a09b21826547d6ac7de6049611bb1cde8}{00124}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classSmaccTestRuntimeNode_a09b21826547d6ac7de6049611bb1cde8}{onSmaccTransitionCallback}}(\textcolor{keyword}{const} smacc\_msgs::SmaccTransitionLogEntry\& msg)}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00125}00125   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00126}00126       this-\/>\mbox{\hyperlink{classSmaccTestRuntimeNode_aaaedcb5c8a4cca432b5138bb1dfb0a6c}{onSmaccTransition}}(msg);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00127}00127   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00128}00128 \};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00129}00129 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00130}00130 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00131}\mbox{\hyperlink{classTimeoutFailureTestPolicy}{00131}} \textcolor{keyword}{class }\mbox{\hyperlink{classTimeoutFailureTestPolicy}{TimeoutFailureTestPolicy}} : \textcolor{keyword}{public} \mbox{\hyperlink{classTestPolicy}{TestPolicy}}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00132}00132 \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00133}\mbox{\hyperlink{classTimeoutFailureTestPolicy_a6075c28b35a0e10632a2f461d7f7b63a}{00133}}   ros::Duration \mbox{\hyperlink{classTimeoutFailureTestPolicy_a6075c28b35a0e10632a2f461d7f7b63a}{timeout\_}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00134}\mbox{\hyperlink{classTimeoutFailureTestPolicy_a75bf7a1990099ecd02017c06f3694e64}{00134}}   ros::Time \mbox{\hyperlink{classTimeoutFailureTestPolicy_a75bf7a1990099ecd02017c06f3694e64}{startTime\_}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00135}00135 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00136}\mbox{\hyperlink{classTimeoutFailureTestPolicy_ab37fd803fdd79d989a6fdf58d3473b87}{00136}}   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classTimeoutFailureTestPolicy_ab37fd803fdd79d989a6fdf58d3473b87}{init}}(XmlRpc::XmlRpcValue\& initXmlRpcValue)\textcolor{keyword}{ override}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00137}00137 \textcolor{keyword}{  }\{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00138}00138     ROS\_INFO(\textcolor{stringliteral}{"{}[TimeoutFailureTestPolicy] initializating"{}});}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00139}00139     \mbox{\hyperlink{classTimeoutFailureTestPolicy_a75bf7a1990099ecd02017c06f3694e64}{startTime\_}} = ros::Time::now();}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00140}00140     \mbox{\hyperlink{classTimeoutFailureTestPolicy_a6075c28b35a0e10632a2f461d7f7b63a}{timeout\_}} = ros::Duration((\textcolor{keywordtype}{double})initXmlRpcValue[\textcolor{stringliteral}{"{}duration"{}}]);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00141}00141 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00142}00142     ROS\_INFO\_STREAM(\textcolor{stringliteral}{"{}[TimeoutFailureTestPolicy] duration: "{}} << \mbox{\hyperlink{classTimeoutFailureTestPolicy_a6075c28b35a0e10632a2f461d7f7b63a}{timeout\_}});}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00143}00143   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00144}00144 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00145}\mbox{\hyperlink{classTimeoutFailureTestPolicy_a51946c46616697b0b0d9d7c7aaef9f22}{00145}}   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classTimeoutFailureTestPolicy_a51946c46616697b0b0d9d7c7aaef9f22}{update}}()}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00146}00146   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00147}00147     \textcolor{keyword}{auto} now = ros::Time::now();}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00148}00148 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00149}00149     \textcolor{keyword}{auto} elapsed = now -\/ \mbox{\hyperlink{classTimeoutFailureTestPolicy_a75bf7a1990099ecd02017c06f3694e64}{startTime\_}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00150}00150 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00151}00151     \textcolor{keywordflow}{if} (elapsed > \mbox{\hyperlink{classTimeoutFailureTestPolicy_a6075c28b35a0e10632a2f461d7f7b63a}{timeout\_}})}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00152}00152     \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00153}00153       this-\/>\mbox{\hyperlink{classTestPolicy_a717c3e59e35216a175398b85575aec43}{owner\_}}-\/>\mbox{\hyperlink{classSmaccTestRuntimeNode_a58254eca6e6a5f2bde6417a1cccc932a}{failure}}(std::string(\textcolor{stringliteral}{"{}timeout failure: "{}}) + std::to\_string(\mbox{\hyperlink{classTimeoutFailureTestPolicy_a6075c28b35a0e10632a2f461d7f7b63a}{timeout\_}}.toSec()));}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00154}00154     \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00155}00155   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00156}00156 \};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00157}00157 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00158}\mbox{\hyperlink{classReachedStateSuccessTestPolicy}{00158}} \textcolor{keyword}{class }\mbox{\hyperlink{classReachedStateSuccessTestPolicy}{ReachedStateSuccessTestPolicy}} : \textcolor{keyword}{public} \mbox{\hyperlink{classTestPolicy}{TestPolicy}}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00159}00159 \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00160}\mbox{\hyperlink{classReachedStateSuccessTestPolicy_a2dc3e3fae4d136b61ca9499eebb06ba2}{00160}}   std::string \mbox{\hyperlink{classReachedStateSuccessTestPolicy_a2dc3e3fae4d136b61ca9499eebb06ba2}{targetStateName\_}};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00161}\mbox{\hyperlink{classReachedStateSuccessTestPolicy_a2a3e598a103fcad64d7a6546c56a0fdd}{00161}}   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classReachedStateSuccessTestPolicy_a2a3e598a103fcad64d7a6546c56a0fdd}{init}}(XmlRpc::XmlRpcValue\& initXmlRpcValue)\textcolor{keyword}{ override}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00162}00162 \textcolor{keyword}{  }\{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00163}00163     ROS\_INFO(\textcolor{stringliteral}{"{}[ReachedStateSuccessTestPolicy] initializating"{}});}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00164}00164     \mbox{\hyperlink{classReachedStateSuccessTestPolicy_a2dc3e3fae4d136b61ca9499eebb06ba2}{targetStateName\_}} = ((std::string)initXmlRpcValue[\textcolor{stringliteral}{"{}state\_name"{}}]);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00165}00165     ROS\_INFO\_STREAM(\textcolor{stringliteral}{"{}[ReachedStateSuccessTestPolicy] success state: "{}} << \mbox{\hyperlink{classReachedStateSuccessTestPolicy_a2dc3e3fae4d136b61ca9499eebb06ba2}{targetStateName\_}});}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00166}00166     this-\/>\mbox{\hyperlink{classTestPolicy_a717c3e59e35216a175398b85575aec43}{owner\_}}-\/>\mbox{\hyperlink{classSmaccTestRuntimeNode_aaaedcb5c8a4cca432b5138bb1dfb0a6c}{onSmaccTransition}}.connect(}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00167}00167     [=](\textcolor{keyword}{auto}\& msg)}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00168}00168     \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00169}00169         ROS\_INFO\_STREAM(\textcolor{stringliteral}{"{}[ReachedStateSuccessTestPolicy] received state: "{}} << msg.transition.destiny\_state\_name);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00170}00170 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00171}00171         \textcolor{keywordflow}{if}(msg.transition.destiny\_state\_name == \mbox{\hyperlink{classReachedStateSuccessTestPolicy_a2dc3e3fae4d136b61ca9499eebb06ba2}{targetStateName\_}})}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00172}00172         \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00173}00173             this-\/>\mbox{\hyperlink{classTestPolicy_a717c3e59e35216a175398b85575aec43}{owner\_}}-\/>\mbox{\hyperlink{classSmaccTestRuntimeNode_a47f93f7fe74e3fc416a2655e92c8dd2d}{success}}(std::string(\textcolor{stringliteral}{"{}success destiny state "{}}) + \mbox{\hyperlink{classReachedStateSuccessTestPolicy_a2dc3e3fae4d136b61ca9499eebb06ba2}{targetStateName\_}});}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00174}00174         \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00175}00175     \});}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00176}00176   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00177}00177 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00178}\mbox{\hyperlink{classReachedStateSuccessTestPolicy_a34696eeabca13524db58dc8c72ffac6c}{00178}}   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classReachedStateSuccessTestPolicy_a34696eeabca13524db58dc8c72ffac6c}{update}}()}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00179}00179   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00180}00180 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00181}00181   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00182}00182 \};}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00183}00183 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00184}00184 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00185}\mbox{\hyperlink{smacc__runtime__test__node_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{00185}} \textcolor{keywordtype}{int} \mbox{\hyperlink{smacc__runtime__test__node_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}** argv)}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00186}00186 \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00187}00187   ros::init(argc, argv, \textcolor{stringliteral}{"{}smacc\_runtime\_test\_node"{}});}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00188}00188 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00189}00189   \mbox{\hyperlink{classSmaccTestRuntimeNode}{SmaccTestRuntimeNode}} testNode;}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00190}00190   testNode.\mbox{\hyperlink{classSmaccTestRuntimeNode_a8a75b2f3884af285826c7168753b8886}{init}}();}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00191}00191 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00192}00192   ros::Rate r(20);}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00193}00193 }
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00194}00194   \textcolor{keywordflow}{while} (ros::ok())}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00195}00195   \{}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00196}00196     testNode.\mbox{\hyperlink{classSmaccTestRuntimeNode_a0cdde5c108219ca3d7db941676fc1dcf}{update}}();}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00197}00197     ros::spinOnce();}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00198}00198     r.sleep();}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00199}00199   \}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00200}00200   \textcolor{comment}{// ros::Subscriber sub = nh.subscribe();}}
\DoxyCodeLine{\Hypertarget{smacc__runtime__test__node_8cpp_source_l00201}00201 \}}

\end{DoxyCode}
