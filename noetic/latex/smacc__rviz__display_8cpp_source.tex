\hypertarget{smacc__rviz__display_8cpp_source}{}\doxysection{smacc\+\_\+rviz\+\_\+display.\+cpp}
\label{smacc__rviz__display_8cpp_source}\index{smacc\_diagnostics/smacc\_rviz\_plugin/src/smacc\_rviz\_display.cpp@{smacc\_diagnostics/smacc\_rviz\_plugin/src/smacc\_rviz\_display.cpp}}
\mbox{\hyperlink{smacc__rviz__display_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00001}00001 \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00002}00002 \textcolor{comment}{ * Copyright (c) 2012, Willow Garage, Inc.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00003}00003 \textcolor{comment}{ * All rights reserved.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00004}00004 \textcolor{comment}{ *}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00005}00005 \textcolor{comment}{ * Redistribution and use in source and binary forms, with or without}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00006}00006 \textcolor{comment}{ * modification, are permitted provided that the following conditions are met:}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00007}00007 \textcolor{comment}{ *}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00008}00008 \textcolor{comment}{ *     * Redistributions of source code must retain the above copyright}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00009}00009 \textcolor{comment}{ *       notice, this list of conditions and the following disclaimer.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00010}00010 \textcolor{comment}{ *     * Redistributions in binary form must reproduce the above copyright}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00011}00011 \textcolor{comment}{ *       notice, this list of conditions and the following disclaimer in the}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00012}00012 \textcolor{comment}{ *       documentation and/or other materials provided with the distribution.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00013}00013 \textcolor{comment}{ *     * Neither the name of the Willow Garage, Inc. nor the names of its}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00014}00014 \textcolor{comment}{ *       contributors may be used to endorse or promote products derived from}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00015}00015 \textcolor{comment}{ *       this software without specific prior written permission.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00016}00016 \textcolor{comment}{ *}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00017}00017 \textcolor{comment}{ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "{}AS IS"{}}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00018}00018 \textcolor{comment}{ * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00019}00019 \textcolor{comment}{ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00020}00020 \textcolor{comment}{ * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00021}00021 \textcolor{comment}{ * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00022}00022 \textcolor{comment}{ * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00023}00023 \textcolor{comment}{ * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00024}00024 \textcolor{comment}{ * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00025}00025 \textcolor{comment}{ * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00026}00026 \textcolor{comment}{ * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00027}00027 \textcolor{comment}{ * POSSIBILITY OF SUCH DAMAGE.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00028}00028 \textcolor{comment}{ */}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00030}00030 \textcolor{preprocessor}{\#include <OGRE/OgreSceneNode.h>}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00031}00031 \textcolor{preprocessor}{\#include <OGRE/OgreSceneManager.h>}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00033}00033 \textcolor{preprocessor}{\#include <tf/transform\_listener.h>}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00035}00035 \textcolor{preprocessor}{\#include <rviz/visualization\_manager.h>}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00036}00036 \textcolor{preprocessor}{\#include <rviz/properties/color\_property.h>}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00037}00037 \textcolor{preprocessor}{\#include <rviz/properties/float\_property.h>}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00038}00038 \textcolor{preprocessor}{\#include <rviz/properties/int\_property.h>}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00039}00039 \textcolor{preprocessor}{\#include <rviz/frame\_manager.h>}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00041}00041 \textcolor{preprocessor}{\#include "{}imu\_visual.h"{}}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00042}00042 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00043}00043 \textcolor{preprocessor}{\#include "{}smacc\_rviz\_display.h"{}}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00045}00045 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacesmacc__rviz__plugin}{smacc\_rviz\_plugin}}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00046}00046 \{}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00048}00048 \textcolor{comment}{// BEGIN\_TUTORIAL}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00049}00049 \textcolor{comment}{// The constructor must have no arguments, so we can't give the}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00050}00050 \textcolor{comment}{// constructor the parameters it needs to fully initialize.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00051}00051 SmaccRvizDisplay::SmaccRvizDisplay()}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00052}00052 \{}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00054}00054   \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00055}00055 \textcolor{comment}{  color\_property\_ = new rviz::ColorProperty( "{}Color"{}, QColor( 204, 51, 204 ),}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00056}00056 \textcolor{comment}{                                             "{}Color to draw the acceleration arrows."{},}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00057}00057 \textcolor{comment}{                                             this, SLOT( updateColorAndAlpha() ));}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00058}00058 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00059}00059 \textcolor{comment}{  alpha\_property\_ = new rviz::FloatProperty( "{}Alpha"{}, 1.0,}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00060}00060 \textcolor{comment}{                                             "{}0 is fully transparent, 1.0 is fully opaque."{},}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00061}00061 \textcolor{comment}{                                             this, SLOT( updateColorAndAlpha() ));}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00062}00062 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00063}00063 \textcolor{comment}{  history\_length\_property\_ = new rviz::IntProperty( "{}History length"{}, 1,}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00064}00064 \textcolor{comment}{                                                    "{}Number of prior measurements to display."{},}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00065}00065 \textcolor{comment}{                                                    this, SLOT( updateHistoryLength() ));}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00066}00066 \textcolor{comment}{                                                    */}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00067}00067 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00068}00068   current\_state\_ = \textcolor{keyword}{new} rviz::StringProperty( \textcolor{stringliteral}{"{}CurrentState"{}}, \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00069}00069                                                     \textcolor{stringliteral}{"{}current smacc state"{}},}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00070}00070                                                     \textcolor{keyword}{this}, SLOT( updateCurrentState() ));}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00072}00072 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00073}00073   topic\_property\_ = \textcolor{keyword}{new} rviz::RosTopicProperty( \textcolor{stringliteral}{"{}Topic"{}}, \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00074}00074                                             \textcolor{stringliteral}{"{}"{}}, \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00075}00075                                             \textcolor{keyword}{this}, SLOT( updateTopic() ));}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00077}00077   QString message\_type = QString::fromStdString( ros::message\_traits::datatype<smacc\_msgs::SmaccStatus>() );}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00078}00078       topic\_property\_-\/>setMessageType( message\_type );}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00079}00079       topic\_property\_-\/>setDescription( message\_type + \textcolor{stringliteral}{"{} topic to subscribe to."{}} );}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00080}00080 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00082}00082   \textcolor{comment}{//history\_length\_property\_-\/>setMin( 1 );}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00083}00083   \textcolor{comment}{//history\_length\_property\_-\/>setMax( 100000 );}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00084}00084 \}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00085}00085 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00086}00086   \textcolor{keywordtype}{void} SmaccRvizDisplay::updateTopic()}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00087}00087   \{}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00088}00088     unsubscribe();}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00089}00089     reset();}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00090}00090     subscribe();}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00091}00091     context\_-\/>queueRender();}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00092}00092   \}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00093}00093 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00094}00094   \textcolor{keywordtype}{void} SmaccRvizDisplay::subscribe()}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00095}00095   \{}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00096}00096       current\_state\_-\/>setValue(QString(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00097}00097       sub\_ = nh\_.subscribe<smacc\_msgs::SmaccStatus>(topic\_property\_-\/>getTopic().toStdString(), 1, \&SmaccRvizDisplay::processMessage , \textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00098}00098   \}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00099}00099 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00100}00100   \textcolor{keywordtype}{void} SmaccRvizDisplay::unsubscribe()}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00101}00101   \{}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00102}00102     current\_state\_-\/>setValue(QString(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00103}00103     sub\_.shutdown();}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00104}00104 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00105}00105   \}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00106}00106 \textcolor{comment}{// After the top-\/level rviz::Display::initialize() does its own setup,}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00107}00107 \textcolor{comment}{// it calls the subclass's onInitialize() function.  This is where we}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00108}00108 \textcolor{comment}{// instantiate all the workings of the class.  We make sure to also}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00109}00109 \textcolor{comment}{// call our immediate super-\/class's onInitialize() function, since it}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00110}00110 \textcolor{comment}{// does important stuff setting up the message filter.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00111}00111 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00112}00112 \textcolor{comment}{//  Note that "{}MFDClass"{} is a typedef of}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00113}00113 \textcolor{comment}{// ``MessageFilterDisplay<message type>``, to save typing that long}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00114}00114 \textcolor{comment}{// templated class name every time you need to refer to the}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00115}00115 \textcolor{comment}{// superclass.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00116}00116 \textcolor{keywordtype}{void} SmaccRvizDisplay::onInitialize()}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00117}00117 \{}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00118}00118   \textcolor{comment}{//MFDClass::onInitialize();}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00119}00119   current\_state\_-\/>setValue(QString(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00120}00120 \}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00121}00121 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00122}00122 SmaccRvizDisplay::\string~SmaccRvizDisplay()}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00123}00123 \{}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00124}00124 \}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00125}00125 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00126}00126 \textcolor{comment}{// Clear the visuals by deleting their objects.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00127}00127 \textcolor{keywordtype}{void} SmaccRvizDisplay::reset()}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00128}00128 \{}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00129}00129   \textcolor{comment}{//MFDClass::reset();}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00130}00130   \textcolor{comment}{//visuals\_.clear();}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00131}00131   current\_state\_-\/>setValue(QString(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00132}00132 \}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00133}00133 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00134}00134 \textcolor{keywordtype}{void} SmaccRvizDisplay::updateCurrentState()}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00135}00135 \{}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00136}00136 \}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00137}00137 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00138}00138 \textcolor{comment}{// This is our callback to handle an incoming message.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00139}00139 \textcolor{keywordtype}{void} SmaccRvizDisplay::processMessage( \textcolor{keyword}{const} smacc\_msgs::SmaccStatus::ConstPtr\& msg )}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00140}00140 \{}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00141}00141   std::string concatenated;}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00142}00142 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00143}00143   \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\& state: msg-\/>current\_states)}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00144}00144   \{}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00145}00145     concatenated = concatenated + std::string(\textcolor{stringliteral}{"{}/"{}})+ state;}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00146}00146   \}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00147}00147 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00148}00148   ROS\_DEBUG(\textcolor{stringliteral}{"{}current state: \%s"{}}, concatenated.c\_str());}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00149}00149   current\_state\_-\/>setValue(QString(concatenated.c\_str()));}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00150}00150   \textcolor{comment}{// Here we call the rviz::FrameManager to get the transform from the}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00151}00151   \textcolor{comment}{// fixed frame to the frame in the header of this Imu message.  If}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00152}00152   \textcolor{comment}{// it fails, we can't do anything else so we return.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00153}00153   \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00154}00154 \textcolor{comment}{  Ogre::Quaternion orientation;}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00155}00155 \textcolor{comment}{  Ogre::Vector3 position;}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00156}00156 \textcolor{comment}{  if( !context\_-\/>getFrameManager()-\/>getTransform( msg-\/>header.frame\_id,}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00157}00157 \textcolor{comment}{                                                  msg-\/>header.stamp,}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00158}00158 \textcolor{comment}{                                                  position, orientation ))}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00159}00159 \textcolor{comment}{  \{}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00160}00160 \textcolor{comment}{    ROS\_DEBUG( "{}Error transforming from frame '\%s' to frame '\%s'"{},}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00161}00161 \textcolor{comment}{               msg-\/>header.frame\_id.c\_str(), qPrintable( fixed\_frame\_ ));}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00162}00162 \textcolor{comment}{    return;}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00163}00163 \textcolor{comment}{  \}}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00164}00164 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00165}00165 \textcolor{comment}{  // We are keeping a circular buffer of visual pointers.  This gets}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00166}00166 \textcolor{comment}{  // the next one, or creates and stores it if the buffer is not full}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00167}00167 \textcolor{comment}{  boost::shared\_ptr<ImuVisual> visual;}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00168}00168 \textcolor{comment}{  if( visuals\_.full() )}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00169}00169 \textcolor{comment}{  \{}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00170}00170 \textcolor{comment}{    visual = visuals\_.front();}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00171}00171 \textcolor{comment}{  \}}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00172}00172 \textcolor{comment}{  else}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00173}00173 \textcolor{comment}{  \{}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00174}00174 \textcolor{comment}{    visual.reset(new ImuVisual( context\_-\/>getSceneManager(), scene\_node\_ ));}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00175}00175 \textcolor{comment}{  \}*/}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00176}00176 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00177}00177   \textcolor{comment}{// Now set or update the contents of the chosen visual.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00178}00178   \textcolor{comment}{//visual-\/>setMessage( msg );}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00179}00179   \textcolor{comment}{//visual-\/>setFramePosition( position );}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00180}00180   \textcolor{comment}{//visual-\/>setFrameOrientation( orientation );}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00181}00181 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00182}00182   \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00183}00183 \textcolor{comment}{  float alpha = alpha\_property\_-\/>getFloat();}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00184}00184 \textcolor{comment}{  Ogre::ColourValue color = color\_property\_-\/>getOgreColor();}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00185}00185 \textcolor{comment}{  visual-\/>setColor( color.r, color.g, color.b, alpha );}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00186}00186 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00187}00187 \textcolor{comment}{  // And send it to the end of the circular buffer}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00188}00188 \textcolor{comment}{  visuals\_.push\_back(visual);}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00189}00189 \textcolor{comment}{  */}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00190}00190 \}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00191}00191 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00192}00192 \} \textcolor{comment}{// end namespace rviz\_plugin\_tutorials}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00193}00193 }
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00194}00194 \textcolor{comment}{// Tell pluginlib about this class.  It is important to do this in}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00195}00195 \textcolor{comment}{// global scope, outside our package's namespace.}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00196}00196 \textcolor{preprocessor}{\#include <pluginlib/class\_list\_macros.h>}}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00197}00197 \mbox{\hyperlink{backward__global__planner_8cpp_a51f582fb30166d23ef7d096df52bdb13}{PLUGINLIB\_EXPORT\_CLASS}}(smacc\_rviz\_plugin::SmaccRvizDisplay,rviz::Display )}
\DoxyCodeLine{\Hypertarget{smacc__rviz__display_8cpp_source_l00198}00198 \textcolor{comment}{// END\_TUTORIAL}}

\end{DoxyCode}
