\hypertarget{cp__lidar__data_8h_source}{}\doxysection{cp\+\_\+lidar\+\_\+data.\+h}
\label{cp__lidar__data_8h_source}\index{smacc\_sm\_reference\_library/sm\_dance\_bot\_strikes\_back/include/sm\_dance\_bot\_strikes\_back/clients/cl\_lidar/components/cp\_lidar\_data.h@{smacc\_sm\_reference\_library/sm\_dance\_bot\_strikes\_back/include/sm\_dance\_bot\_strikes\_back/clients/cl\_lidar/components/cp\_lidar\_data.h}}
\mbox{\hyperlink{cp__lidar__data_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00002}00002 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{smacc_8h}{smacc/smacc.h}}>}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00004}00004 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacesm__dance__bot__strikes__back}{sm\_dance\_bot\_strikes\_back}}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00005}00005 \{}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00006}00006 \textcolor{keyword}{namespace }cl\_lidar}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00007}00007 \{}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00008}\mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData}{00008}} \textcolor{keyword}{class }\mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData}{CpLidarSensorData}} : \textcolor{keyword}{public} \mbox{\hyperlink{classsmacc_1_1ISmaccComponent}{smacc::ISmaccComponent}}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00009}00009 \{}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00010}00010 \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00011}\mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_a8a84fbb0a3f35a7fc040b266d33075ec}{00011}}   sensor\_msgs::LaserScan \mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_a8a84fbb0a3f35a7fc040b266d33075ec}{lastMessage\_}};}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00012}\mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_a40d6ddeab582ec69477622e3c060b210}{00012}}   \textcolor{keywordtype}{float} \mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_a40d6ddeab582ec69477622e3c060b210}{forwardObstacleDistance}};}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00014}\mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_aa83f62091b2455323340a87e8636df60}{00014}}   \textcolor{keyword}{const} \textcolor{keywordtype}{float} \mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_aa83f62091b2455323340a87e8636df60}{SECURITY\_DISTANCE}} =  1; \textcolor{comment}{//meters}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00016}\mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_a138dad9a855d5d4962410374d0a29d30}{00016}}   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_a138dad9a855d5d4962410374d0a29d30}{onInitialize}}()\textcolor{keyword}{ override}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00017}00017 \textcolor{keyword}{  }\{}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00018}00018     \textcolor{keyword}{auto} client\_ = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{classsmacc_1_1client__bases_1_1SmaccSubscriberClient}{smacc::client\_bases::SmaccSubscriberClient<sensor\_msgs::LaserScan>}} *\textcolor{keyword}{>}(\mbox{\hyperlink{classsmacc_1_1ISmaccComponent_a909590e672450ce0eb0d8facb45c737a}{owner\_}});}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00019}00019     client\_-\/>\mbox{\hyperlink{classsmacc_1_1client__bases_1_1SmaccSubscriberClient_a4f02251e3a161fb6d802b154b1081f18}{onMessageReceived}}(\&\mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_aefe481c1441305a6adf5266c49d941a4}{CpLidarSensorData::MessageCallbackStoreDistanceToWall}}, \textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00020}00020   \}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00022}\mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_aefe481c1441305a6adf5266c49d941a4}{00022}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_aefe481c1441305a6adf5266c49d941a4}{MessageCallbackStoreDistanceToWall}}(\textcolor{keyword}{const} sensor\_msgs::LaserScan \&scanmsg)}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00023}00023   \{}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00024}00024     this-\/>lastMessage\_ = scanmsg;}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00025}00025     \textcolor{keyword}{auto} fwdist = scanmsg.ranges[scanmsg.ranges.size() / 2] \textcolor{comment}{/*meter*/};}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00027}00027     \textcolor{comment}{/*if the distance is infinity or nan, use max range distance*/}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00028}00028     \textcolor{keywordflow}{if} (fwdist == std::numeric\_limits<float>::infinity() || fwdist != fwdist)}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00029}00029     \{}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00030}00030       this-\/>forwardObstacleDistance = scanmsg.range\_max -\/ \mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_aa83f62091b2455323340a87e8636df60}{SECURITY\_DISTANCE}} \textcolor{comment}{/*meters*/};}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00031}00031       ROS\_INFO\_THROTTLE(1.0, \textcolor{stringliteral}{"{}[CpLidarSensorData] Distance to forward obstacle is not a number, setting default value to: \%lf"{}}, scanmsg.range\_max);}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00032}00032     \}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00033}00033     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00034}00034     \{}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00035}00035       this-\/>forwardObstacleDistance = std::max(fwdist -\/ \mbox{\hyperlink{classsm__dance__bot__strikes__back_1_1cl__lidar_1_1CpLidarSensorData_aa83f62091b2455323340a87e8636df60}{SECURITY\_DISTANCE}}, 0.0F);}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00036}00036     \}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00037}00037   \}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00038}00038 \};}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00039}00039 \} \textcolor{comment}{// namespace cl\_lidar}}
\DoxyCodeLine{\Hypertarget{cp__lidar__data_8h_source_l00040}00040 \} \textcolor{comment}{// namespace sm\_dance\_bot\_2}}

\end{DoxyCode}
