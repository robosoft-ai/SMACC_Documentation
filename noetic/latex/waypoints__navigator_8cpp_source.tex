\hypertarget{waypoints__navigator_8cpp_source}{}\doxysection{waypoints\+\_\+navigator.\+cpp}
\label{waypoints__navigator_8cpp_source}\index{smacc\_client\_library/move\_base\_z\_client/move\_base\_z\_client\_plugin/src/components/waypoints\_navigator/waypoints\_navigator.cpp@{smacc\_client\_library/move\_base\_z\_client/move\_base\_z\_client\_plugin/src/components/waypoints\_navigator/waypoints\_navigator.cpp}}
\mbox{\hyperlink{waypoints__navigator_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{move__base__z__client__plugin_8h}{move\_base\_z\_client\_plugin/move\_base\_z\_client\_plugin.h}}>}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00002}00002 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{waypoints__navigator_8h}{move\_base\_z\_client\_plugin/components/waypoints\_navigator/waypoints\_navigator.h}}>}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{planner__switcher_8h}{move\_base\_z\_client\_plugin/components/planner\_switcher/planner\_switcher.h}}>}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{odom__tracker_8h}{move\_base\_z\_client\_plugin/components/odom\_tracker/odom\_tracker.h}}>}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00005}00005 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{cp__pose_8h}{move\_base\_z\_client\_plugin/components/pose/cp\_pose.h}}>}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00007}00007 \textcolor{preprocessor}{\#include <fstream>}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00008}00008 \textcolor{preprocessor}{\#include <ros/ros.h>}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00009}00009 \textcolor{preprocessor}{\#include <yaml-\/cpp/yaml.h>}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00010}00010 \textcolor{preprocessor}{\#include <tf/transform\_datatypes.h>}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00012}00012 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacecl__move__base__z}{cl\_move\_base\_z}}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00013}00013 \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00014}\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a62d2f964f5537e17f94317c2f69c8969}{00014}} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a62d2f964f5537e17f94317c2f69c8969}{WaypointNavigator::WaypointNavigator}}()}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00015}00015     : currentWaypoint\_(0),}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00016}00016       waypoints\_(0)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00017}00017 \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00018}00018 \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00019}00019 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00020}\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_ac60ecf63f7a2a84f3ef51f04cc222a70}{00020}} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_ac60ecf63f7a2a84f3ef51f04cc222a70}{WaypointNavigator::onInitialize}}()}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00021}00021 \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00022}00022   \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_afc5ad5c5d15f41437286b8fca1d3a324}{client\_}} = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{classcl__move__base__z_1_1ClMoveBaseZ}{ClMoveBaseZ}} *\textcolor{keyword}{>}(\mbox{\hyperlink{classsmacc_1_1ISmaccComponent_a909590e672450ce0eb0d8facb45c737a}{owner\_}});}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00023}00023 \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00025}\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_ae10ba80b7e46b62096cac96609f66893}{00025}} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_ae10ba80b7e46b62096cac96609f66893}{WaypointNavigator::onGoalReached}}(\mbox{\hyperlink{classcl__move__base__z_1_1ClMoveBaseZ_a99373d0c15ae96684462d8677f5fd632}{ClMoveBaseZ::ResultConstPtr}} \&res)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00026}00026 \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00027}00027   \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a4f2be7a9741e8535c414e63335d752a0}{waypointsEventDispatcher}}.\mbox{\hyperlink{classcl__move__base__z_1_1WaypointEventDispatcher_a6462eae610b97df2207ecd93c1544aaf}{postWaypointEvent}}(\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a82859e418592c2392c20a2d11b9836eb}{currentWaypoint\_}});}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00028}00028   \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a82859e418592c2392c20a2d11b9836eb}{currentWaypoint\_}}++;}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00029}00029   this-\/>\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a6e32b1d6cae56963187d0965de251108}{succeddedConnection\_}}.disconnect();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00030}00030 \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00031}00031 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00032}\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a1e0a8ff536d2d01a01063fd903029347}{00032}} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a1e0a8ff536d2d01a01063fd903029347}{WaypointNavigator::sendNextGoal}}()}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00033}00033 \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00034}00034   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a82859e418592c2392c20a2d11b9836eb}{currentWaypoint\_}} >= 0 \&\& \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a82859e418592c2392c20a2d11b9836eb}{currentWaypoint\_}} < \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.size())}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00035}00035   \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00036}00036     \textcolor{keyword}{auto} \&next = \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}[\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a82859e418592c2392c20a2d11b9836eb}{currentWaypoint\_}}];}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00038}00038     \textcolor{keyword}{auto} odomTracker = \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_afc5ad5c5d15f41437286b8fca1d3a324}{client\_}}-\/>\mbox{\hyperlink{classsmacc_1_1ISmaccClient_adef78db601749ca63c19e74a27cb88cc}{getComponent}}<\mbox{\hyperlink{classcl__move__base__z_1_1odom__tracker_1_1OdomTracker}{cl\_move\_base\_z::odom\_tracker::OdomTracker}}>();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00039}00039     \textcolor{keyword}{auto} p = \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_afc5ad5c5d15f41437286b8fca1d3a324}{client\_}}-\/>\mbox{\hyperlink{classsmacc_1_1ISmaccClient_adef78db601749ca63c19e74a27cb88cc}{getComponent}}<\mbox{\hyperlink{classcl__move__base__z_1_1Pose}{cl\_move\_base\_z::Pose}}>();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00040}00040     \textcolor{keyword}{auto} pose = p-\/>toPoseMsg();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00042}00042     ClMoveBaseZ::Goal goal;}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00043}00043     goal.target\_pose.header.frame\_id = p-\/>getReferenceFrame();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00044}00044     goal.target\_pose.header.stamp = ros::Time::now();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00045}00045     goal.target\_pose.pose = next;}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00047}00047     \textcolor{keyword}{auto} plannerSwitcher = \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_afc5ad5c5d15f41437286b8fca1d3a324}{client\_}}-\/>\mbox{\hyperlink{classsmacc_1_1ISmaccClient_adef78db601749ca63c19e74a27cb88cc}{getComponent}}<\mbox{\hyperlink{classcl__move__base__z_1_1PlannerSwitcher}{PlannerSwitcher}}>();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00048}00048     plannerSwitcher-\/>\mbox{\hyperlink{classcl__move__base__z_1_1PlannerSwitcher_ad3f0d08a51af6218d203bf44a7f9df40}{setDefaultPlanners}}();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00050}00050     ros::spinOnce();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00051}00051     ros::Duration(5).sleep();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00052}00052 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00053}00053     \textcolor{keywordflow}{if} (odomTracker != \textcolor{keyword}{nullptr})}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00054}00054     \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00055}00055       odomTracker-\/>pushPath(\textcolor{stringliteral}{"{}FreeNavigationToGoalWaypointPose"{}});}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00056}00056       odomTracker-\/>setStartPoint(pose);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00057}00057       odomTracker-\/>setWorkingMode(\mbox{\hyperlink{namespacecl__move__base__z_1_1odom__tracker_ac46b05813b2791604f6cd0a39ace3ef8a023bc3adf68871ef7a0c616765ac80a7}{cl\_move\_base\_z::odom\_tracker::WorkingMode::RECORD\_PATH}});}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00058}00058     \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00059}00059 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00060}00060     this-\/>\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a6e32b1d6cae56963187d0965de251108}{succeddedConnection\_}} = \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_afc5ad5c5d15f41437286b8fca1d3a324}{client\_}}-\/>\mbox{\hyperlink{classsmacc_1_1client__bases_1_1SmaccActionClientBase_af6d77c27d21b2e4f621f53c5f1df088b}{onSucceeded}}(\&\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_ae10ba80b7e46b62096cac96609f66893}{WaypointNavigator::onGoalReached}}, \textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00061}00061     \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_afc5ad5c5d15f41437286b8fca1d3a324}{client\_}}-\/>\mbox{\hyperlink{classsmacc_1_1client__bases_1_1SmaccActionClientBase_a9c47a5094ac8afb01680307fe5eca922}{sendGoal}}(goal);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00062}00062   \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00063}00063   \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00064}00064   \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00065}00065     ROS\_WARN(\textcolor{stringliteral}{"{}[WaypointsNavigator] All waypoints were consumed. There is no more waypoints available."{}});}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00066}00066   \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00067}00067 \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00069}\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a5d40e7942620c3c191e2a3bd75845069}{00069}} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a5d40e7942620c3c191e2a3bd75845069}{WaypointNavigator::insertWaypoint}}(\textcolor{keywordtype}{int} index, geometry\_msgs::Pose \&newpose)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00070}00070 \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00071}00071   \textcolor{keywordflow}{if} (index >= 0 \&\& index <= \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.size())}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00072}00072   \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00073}00073     \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.insert(\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.begin(), index, newpose);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00074}00074   \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00075}00075 \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00077}\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a477992dbb2eca9ee77a396d0fe1b084b}{00077}} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a477992dbb2eca9ee77a396d0fe1b084b}{WaypointNavigator::setWaypoints}}(\textcolor{keyword}{const} std::vector<geometry\_msgs::Pose> \&waypoints)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00078}00078 \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00079}00079   this-\/>\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}} = waypoints;}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00080}00080 \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00082}\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_aa164ff2510b9549b0b73df6eb18a7a4f}{00082}} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a477992dbb2eca9ee77a396d0fe1b084b}{WaypointNavigator::setWaypoints}}(\textcolor{keyword}{const} std::vector<Pose2D> \&waypoints)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00083}00083 \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00084}00084   this-\/>\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.clear();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00085}00085   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&p : waypoints)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00086}00086   \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00087}00087     geometry\_msgs::Pose pose;}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00088}00088     pose.position.x = p.x\_;}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00089}00089     pose.position.y = p.y\_;}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00090}00090     pose.position.z = 0.0;}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00091}00091     pose.orientation = tf::createQuaternionMsgFromYaw(p.yaw\_);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00092}00092 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00093}00093     this-\/>\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.push\_back(pose);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00094}00094   \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00095}00095 \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00096}00096 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00097}\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a0a7e9e35ed5ba02ff4cfb580ffa25e9a}{00097}} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a0a7e9e35ed5ba02ff4cfb580ffa25e9a}{WaypointNavigator::removeWaypoint}}(\textcolor{keywordtype}{int} index)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00098}00098 \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00099}00099   \textcolor{keywordflow}{if} (index >= 0 \&\& index < \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.size())}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00100}00100   \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00101}00101     \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.erase(\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.begin() + index);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00102}00102   \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00103}00103 \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00104}00104 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00105}\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a553cdd4ddc20ff26c1bdcb6dad42911f}{00105}} \textcolor{keyword}{const} std::vector<geometry\_msgs::Pose> \&\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a553cdd4ddc20ff26c1bdcb6dad42911f}{WaypointNavigator::getWaypoints}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00106}00106 \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00107}00107   \textcolor{keywordflow}{return} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}};}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00108}00108 \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00109}00109 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00110}\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a753c3df56b96c49438a361d3e5234f79}{00110}} \textcolor{keywordtype}{long} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a753c3df56b96c49438a361d3e5234f79}{WaypointNavigator::getCurrentWaypointIndex}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00111}00111 \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00112}00112   \textcolor{keywordflow}{return} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a82859e418592c2392c20a2d11b9836eb}{currentWaypoint\_}};}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00113}00113 \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00114}00114 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00115}\mbox{\hyperlink{waypoints__navigator_8cpp_a8f298134094422968fe45aeb8b32b9aa}{00115}} \textcolor{preprocessor}{\#define HAVE\_NEW\_YAMLCPP}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00116}\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a18d74467ddf0e637a8d5a6e1fa2e93db}{00116}} \textcolor{keywordtype}{void} \mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a18d74467ddf0e637a8d5a6e1fa2e93db}{WaypointNavigator::loadWayPointsFromFile}}(std::string filepath)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00117}00117 \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00118}00118   this-\/>\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.clear();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00119}00119   std::ifstream ifs(filepath.c\_str(), std::ifstream::in);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00120}00120   \textcolor{keywordflow}{if} (ifs.good() == \textcolor{keyword}{false})}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00121}00121   \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00122}00122     \textcolor{keywordflow}{throw} std::string(\textcolor{stringliteral}{"{}Waypoints file not found"{}});}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00123}00123   \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00124}00124 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00125}00125   \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00126}00126   \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00127}00127 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00128}00128 \textcolor{preprocessor}{\#ifdef HAVE\_NEW\_YAMLCPP}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00129}00129     YAML::Node node = YAML::Load(ifs);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00130}00130 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00131}00131     YAML::Parser \mbox{\hyperlink{namespacegenerate__debs_a4a9ae4bb85fc62d7973ea3d09ced6c26}{parser}}(ifs);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00132}00132     \mbox{\hyperlink{namespacegenerate__debs_a4a9ae4bb85fc62d7973ea3d09ced6c26}{parser}}.GetNextDocument(node);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00133}00133 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00134}00134 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00135}00135 \textcolor{preprocessor}{\#ifdef HAVE\_NEW\_YAMLCPP}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00136}00136     \textcolor{keyword}{const} YAML::Node \&wp\_node\_tmp = node[\textcolor{stringliteral}{"{}waypoints"{}}];}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00137}00137     \textcolor{keyword}{const} YAML::Node *wp\_node = wp\_node\_tmp ? \&wp\_node\_tmp : NULL;}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00138}00138 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00139}00139     \textcolor{keyword}{const} YAML::Node *wp\_node = node.FindValue(\textcolor{stringliteral}{"{}waypoints"{}});}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00140}00140 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00141}00141 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00142}00142     \textcolor{keywordflow}{if} (wp\_node != NULL)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00143}00143     \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00144}00144       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < wp\_node-\/>size(); ++i)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00145}00145       \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00146}00146         \textcolor{comment}{// Parse waypoint entries on YAML}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00147}00147         geometry\_msgs::Pose wp;}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00148}00148 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00149}00149         \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00150}00150         \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00151}00151           \textcolor{comment}{// (*wp\_node)[i]["{}name"{}] >> wp.name;}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00152}00152           \textcolor{comment}{// (*wp\_node)[i]["{}frame\_id"{}] >> wp.header.frame\_id;}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00153}00153           wp.position.x = (*wp\_node)[i][\textcolor{stringliteral}{"{}position"{}}][\textcolor{stringliteral}{"{}x"{}}].as<\textcolor{keywordtype}{double}>();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00154}00154           wp.position.y = (*wp\_node)[i][\textcolor{stringliteral}{"{}position"{}}][\textcolor{stringliteral}{"{}y"{}}].as<\textcolor{keywordtype}{double}>();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00155}00155           wp.position.z = (*wp\_node)[i][\textcolor{stringliteral}{"{}position"{}}][\textcolor{stringliteral}{"{}z"{}}].as<\textcolor{keywordtype}{double}>();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00156}00156           wp.orientation.x = (*wp\_node)[i][\textcolor{stringliteral}{"{}orientation"{}}][\textcolor{stringliteral}{"{}x"{}}].as<\textcolor{keywordtype}{double}>();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00157}00157           wp.orientation.y = (*wp\_node)[i][\textcolor{stringliteral}{"{}orientation"{}}][\textcolor{stringliteral}{"{}y"{}}].as<\textcolor{keywordtype}{double}>();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00158}00158           wp.orientation.z = (*wp\_node)[i][\textcolor{stringliteral}{"{}orientation"{}}][\textcolor{stringliteral}{"{}z"{}}].as<\textcolor{keywordtype}{double}>();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00159}00159           wp.orientation.w = (*wp\_node)[i][\textcolor{stringliteral}{"{}orientation"{}}][\textcolor{stringliteral}{"{}w"{}}].as<\textcolor{keywordtype}{double}>();}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00160}00160 }
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00161}00161           this-\/>\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.push\_back(wp);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00162}00162         \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00163}00163         \textcolor{keywordflow}{catch} (...)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00164}00164         \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00165}00165           ROS\_ERROR(\textcolor{stringliteral}{"{}parsing waypoint file, syntax error in point \%d"{}}, i);}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00166}00166         \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00167}00167       \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00168}00168       ROS\_INFO\_STREAM(\textcolor{stringliteral}{"{}Parsed "{}} << this-\/>\mbox{\hyperlink{classcl__move__base__z_1_1WaypointNavigator_a727f6a73e15ff5dc6bb3ffdf52c3d832}{waypoints\_}}.size() << \textcolor{stringliteral}{"{} waypoints."{}});}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00169}00169     \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00170}00170     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00171}00171     \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00172}00172       ROS\_WARN\_STREAM(\textcolor{stringliteral}{"{}Couldn't find any waypoints in the provided yaml file."{}});}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00173}00173     \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00174}00174   \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00175}00175   \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} YAML::ParserException \&ex)}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00176}00176   \{}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00177}00177     ROS\_ERROR\_STREAM(\textcolor{stringliteral}{"{}Error loading the Waypoints YAML file. Incorrect syntax: "{}} << ex.what());}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00178}00178   \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00179}00179 \}}
\DoxyCodeLine{\Hypertarget{waypoints__navigator_8cpp_source_l00180}00180 \} \textcolor{comment}{// namespace cl\_move\_base\_z}}

\end{DoxyCode}
